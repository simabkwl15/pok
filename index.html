<script>
const apiURL = "https://script.google.com/macros/s/AKfycbyJW9AA2Bf2B2zSdCBoKxKrVEz1V9Fk_hUne0gZjVI3R8G1r9gD6aToTj4Gl_Basuxj/exec";

async function login() {
    const nip = document.getElementById("nip").value.trim();
    const password = document.getElementById("password").value.trim();
    const errorMsg = document.getElementById("errorMsg");

    errorMsg.textContent = "Memeriksa data...";

    try {
        const response = await fetch(apiURL, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                nip: nip,
                password: password
            })
        });

        const result = await response.json();

        if (result.status === "success") {
            sessionStorage.setItem("nama", result.nama);
            sessionStorage.setItem("unit", result.unit);
            window.location.href = "data_pok.html";
        } else {
            errorMsg.textContent = result.message;
        }

    } catch (err) {
        errorMsg.textContent = "Gagal terhubung ke server";
    }
}
</script>
